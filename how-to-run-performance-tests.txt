# How to Run Performance Tests with K6 in Docker

## Overview
This guide explains how to run k6 performance tests for the Auth service using Docker containers.
All tests run in isolated Docker containers to ensure consistent results.

================================================================================
QUICK START - Running Tests in Docker
================================================================================

1. Navigate to the project root:
   cd /d/CodingProjects/OnlineShop-perf-testing

2. Stop any existing containers:
   docker compose down
   docker compose -f tests/performance/docker-compose.perf.yml down

3. Start the performance test environment (Auth service + Database):
   docker compose -f tests/performance/docker-compose.perf.yml up -d

4. Wait for services to be healthy (usually 30-60 seconds):
   docker compose -f tests/performance/docker-compose.perf.yml ps

   You should see both services as "healthy"

5. Run the tests using k6 in Docker:

   a) Smoke Test (Quick sanity check, ~2 minutes):
      docker compose -f tests/performance/docker-compose.perf.yml run --rm k6 run -e ENV=docker smoke.js

   b) Load Test (Realistic traffic, ~10 minutes):
      docker compose -f tests/performance/docker-compose.perf.yml run --rm k6 run -e ENV=docker load.js

   c) Stress Test (Find limits, ~20 minutes):
      docker compose -f tests/performance/docker-compose.perf.yml run --rm k6 run -e ENV=docker stress.js

6. Stop the environment when done:
   docker compose -f tests/performance/docker-compose.perf.yml down
