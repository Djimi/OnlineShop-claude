server:
  port: 10000

spring:
  application:
    name: api-gateway

info:
  app:
    name: ${spring.application.name} # <--- Dynamic Reference
    description: "Main entry point for microservices. DPM service"

  threads:
    virtual:
      enabled: true

  cloud:
    gateway:
      mvc:
        cors:
          cors-configurations:
            '[/**]':
              allowed-origins:
                - "http://localhost:5173"
                - "http://localhost:5174"
                - "http://localhost:3000"
                - "http://127.0.0.1:5173"
              allowed-methods:
                - GET
                - POST
                - PUT
                - DELETE
                - OPTIONS
                - PATCH
              allowed-headers: "*"
              allow-credentials: true
              max-age: 3600

  # Redis configuration (L2 cache)
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 100ms

# Actuator & Metrics
management:
  endpoint:
    env:
      show-values: always
    configprops:
      show-values: always
  endpoints:
    web:
      exposure:
        include: "*"
    health:
      show-details: always
  metrics:
    tags:
      application: api-gateway
  info:
    env:
      enabled: true

# Custom gateway configuration
gateway:
  auth:
    service-url: http://localhost:9001
    validate-endpoint: /api/v1/auth/validate
  items:
    service-url: http://localhost:9000
  cache:
    caffeine:
      ttl-seconds: 60
      max-size: 10000
    redis:
      ttl-seconds: 300
  ratelimit:
    anonymous:
      requests-per-minute: 60
      burst: 10
    authenticated:
      requests-per-minute: 300
      burst: 50

debug: true
